<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>full text search engine comparison</title>

    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <script type=text/x-lodash-template id=viewing>
      <% _.each(_.keys(strings.engines), function(engine) { %>
        <label>
          <input  type=checkbox
                  name=show-<%= engine %>-results
                  value=<%= engine %>
                  <%= model.viewing.indexOf(engine) >= 0 ? 'checked=true' : '' %> />
          <%= strings.engines[engine] %>
        </label>
      <% }) %>
    </script>

    <script type=text/x-lodash-template id=results>
      <p>
        <strong>Showing results for:</strong>
        <span class=term><%= model.term %></span>
      </p>

      <% _.each(model.results, function(results, engine) { %>
        <div class="<%= engine %> result results-<%= _.keys(model.results).length %>">
          <h2>
            <%= strings.engines[engine] %>
          </h2>

          <% if (results.length) { %>
            <table class=zebra>
              <thead>
                <tr>
                  <th>User</th>
                  <th>Message</th>
                </tr>
              </thead>

              <tbody>
                <% _.each(results, function(result) { %>
                  <tr>
                    <td class=handle title="<%= result.sent.format('YYYY-MM-DD h:mm:ss A') %>">
                      <%= result.handle %>
                    </td>
                    <td>
                      <%= result.message %>
                    </td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          <% } else { %>
            <table>
              <tr>
                <td>
                  No results found.
                </td>
              </tr>
            </table>
          <% } %>

        </div>
      <% }) %>
    </script>

    <form name=search action=javascript:void(0)>
      <input type=search autofocus=true placeholder="Search..." />
      <span class=loading></span>
    </form>

    <div class=viewing></div>

    <div class=results></div>

    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.2.1/lodash.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.4.0/moment.min.js"></script>
    <script src="/js/index.js"></script>
  </body>
</html>
